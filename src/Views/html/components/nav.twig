<nav class="navbar navbar-light bg-faded navbar-static-top" id="search-navbar" style="padding: 0; height: 64px; border-bottom: 1px solid #dce0e0;">
  <div class="container-fluid" id="search-navbar-container">
    <a class="navbar-brand" href="{{ path('index') }}" style="line-height: 50px; border-right: 1px solid #dce0e0; padding-right: 1em; padding-top: 7px; padding-bottom: 7px; margin: 0; color: #55595c">FoodShare</a>
    <ul class="nav navbar-nav">
      <li class="nav-item hidden-md-down" style="height: 63px;">
        <select id="categories-dropdown" class="custom-select square-border btn-option" style="border-left: 0; border-right: 1px solid #dce0e0;">
          <option selected>Categories</option>
          <option value="1">Fresh Food</option>
          <option value="2">Bakery</option>
          <option value="3">Food Cupboard</option>
          <option value="4">Frozen Food</option>
          <option value="5">Drinks</option>
          <option value="6">Baby</option>
          <option value="7">Personal</option>
          <option value="8">Pet Care</option>
          <option value="9">Household</option>
        </select>
      </li>
      <li class="nav-item hidden-md-down" style="height: 63px;">
        <div id="search-navbar-group" class="form-group input-group" style="height: 100%; width: 200px;">
          <span class="input-group-addon panel-input-symbol" style="border-bottom: 0; padding: 1em; padding-right: 0; background-color: #FAFAFA;"><i class="fa fa-search" aria-hidden="true"></i></span>
          <input type="text" name="search" id="main-search-input" class="form-control mr-sm-2 square-border" style="width: 200px; height: 100%; border: 0; background-color: #FAFAFA;" placeholder="Search" value="">
        </div>
      </li>
    </ul>

    <ul class="nav navbar-nav float-xs-right">
      <li class="nav-item" style="height: 63px;">
        <button id="register-button" class="btn btn-option btn-signup square-border" style="margin-right: -16px;" type="button" data-toggle="modal" data-target="#loginModal" onclick="$('#register-form-link').click();">Register</button>
      </li>
      <li class="nav-item" style="height: 63px;">
        <button id="login-button" class="btn btn-option btn-signup square-border" type="button" data-toggle="modal" data-target="#loginModal" onclick="$('#login-form-link').click();">Login</button>
      </li>
    </ul>

  </div>
</nav>

<nav class="navbar navbar-light bg-faded navbar-static-top hidden-md-down" id="options-navbar" style="padding: 0; height: 47px; border-bottom: 1px solid #dce0e0;">
  <div class="container-fluid" style="height: 100%;">
    <ul class="nav navbar-nav">
      <li class="nav-item hidden-md-down" style="height: 100%;">
        <div class="form-group input-group" style="height: 100%; width: 220px;">
          <span class="input-group-addon panel-input-symbol" style="border-bottom: 0; padding: 0; padding-right: 0; background-color: #FAFAFA;"><i class="fa fa-globe" aria-hidden="true"></i></span>
          <input type="text" title="Location" class="form-control" id="pac-input" style="height: 100%; width: 210px; border: 0; background-color: #FAFAFA;" placeholder="Location" latitude="" longitude="">
        </div>
      </li>
      <li class="nav-item hidden-md-down" style="height: 46px;">
        <button id="radius-popover"type="button" class="btn btn-option square-border" data-container="body" data-toggle="popover" data-placement="bottom">Radius <i class="fa fa-caret-down" aria-hidden="true"></i></button>
        <div id="radius-popover-title" class="hidden-xs-up"></div>
        <div id="radius-popover-content" class="hidden-xs-up">
          <form>
            <div class="form-group">
              <label for="radiusMinInput">Min Radius</label>
              <input type="number" class="form-control" id="radiusMinInput" placeholder="Min">
            </div>
            <div class="form-group">
              <label for="radiusMaxInput">Max Radius</label>
              <input type="number" class="form-control" id="radiusMaxInput" placeholder="Max">
            </div>
            <button class="btn btn-option square-border" style="background-color: #E8E9EC; border: 1px solid #dce0e0">Apply</button>
          </form>
        </div>
      </li>
      <li class="nav-item hidden-md-down" style="height: 46px; margin-left: -6px;">
        <button id="quantity-popover"type="button" class="btn btn-option square-border" data-container="body" data-toggle="popover" data-placement="bottom">Quantity <i class="fa fa-caret-down" aria-hidden="true"></i></button>
        <div id="quantity-popover-title" class="hidden-xs-up"></div>
        <div id="quantity-popover-content" class="hidden-xs-up">
          <form>
            <div class="form-group">
              <label for="quantityMinInput">Min Quantity</label>
              <input type="number" class="form-control" id="radiusMinInput" placeholder="Min">
            </div>
            <div class="form-group">
              <label for="quantityMaxInput">Max Quantity</label>
              <input type="number" class="form-control" id="radiusMaxInput" placeholder="Max">
            </div>
            <button class="btn btn-option square-border" style="background-color: #E8E9EC; border: 1px solid #dce0e0">Apply</button>
          </form>
        </div>
      </li>
      <li class="nav-item hidden-md-down" style="height: 46px; margin-left: -6px;">
        <button id="weight-popover"type="button" class="btn btn-option square-border" style="border-right: 1px solid #dce0e0" data-container="body" data-toggle="popover" data-placement="bottom">Weight <i class="fa fa-caret-down" aria-hidden="true"></i></button>
        <div id="weight-popover-title" class="hidden-xs-up"></div>
        <div id="weight-popover-content" class="hidden-xs-up">
          <form>
            <div class="form-group">
              <label for="weightMinInput">Min Weight</label>
              <input type="number" class="form-control" id="radiusMinInput" placeholder="Min">
            </div>
            <div class="form-group">
              <label for="weightMaxInput">Max Weight</label>
              <input type="number" class="form-control" id="radiusMaxInput" placeholder="Max">
            </div>
            <button class="btn btn-option square-border" style="background-color: #E8E9EC; border: 1px solid #dce0e0">Apply</button>
          </form>
        </div>
      </li>
    </ul>

    <ul class="nav navbar-nav float-xs-right">
      <li class="nav-item" style="height: 46px; margin-left: -6px;">
        <button class="btn btn-option square-border fake-button-new" style="">Sort By:</button>
      </li>
      <li class="nav-item" style="height: 46px; margin-left: -6px;">
        <button id="radius-sort" class="btn btn-option square-border" style="">Radius <i id="radius-sort-icon" class="fa fa-sort-asc" aria-hidden="true"></i></button>
      </li>
      <li class="nav-item" style="height: 46px; margin-left: -6px;">
        <button id="weight-sort" class="btn btn-option square-border" style="">Weight <i id="weight-sort-icon" class="" aria-hidden="true"></i></button>
      </li>
      <li class="nav-item" style="height: 46px; margin-left: -6px;">
        <button id="expiry-sort" class="btn btn-option square-border" style="">Expiry <i id="expiry-sort-icon" class="" aria-hidden="true"></i></button>
      </li>
    </ul>
  </div>
</nav>

<!-- LOGIN MODAL -->
<div class="modal fade" id="loginModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content square-border" style="border: 0;">
      <div class="container">
            <div class="container" style="padding: 1rem;">
            <form id="loginForm" action="{{ path('account_login_check') }}" method="post">
              <h3 class="panel-title">Login</h3>
              <h4>{{ error }}</h4>
              <div class="form-group input-group">
                <span class="input-group-addon panel-input-symbol"><i class="fa fa-fw fa-user" aria-hidden="true"></i></span>
                <input type="text" name="_username" id="username" tabindex="1" class="form-control panel-input" placeholder="Username" value="">
              </div>
              <div class="form-group input-group">
                <span class="input-group-addon panel-input-symbol"><i class="fa fa-fw fa-lock" aria-hidden="true"></i></span>
                <input type="password" name="_password" id="password" tabindex="2" class="form-control panel-input" placeholder="Password">
              </div>
              <div class="col-xs-6 form-group">
                <label class="custom-control custom-checkbox" style="margin-top: 0.8rem;">
                  <input type="checkbox" class="custom-control-input">
                  <span class="custom-control-indicator"></span>
                  <span class="custom-control-description">Remember Me</span>
                </label>
              </div>
              <div class="col-xs-6 form-group">
                <button type="submit" value="login" name="login" id="login-submit" tabindex="4" class="form-control btn btn-login">Login</button>
              </div>
            </form>
            <form id="registerForm" class="hidden-xs-up" action="{{ path('account_login_check') }}" method="post">
              <h3 class="panel-title">Register</h3>
              <h4>{{ error }}</h4>
              <div class="form-group input-group">
                <span class="input-group-addon panel-input-symbol"><i class="fa fa-fw fa-pencil" aria-hidden="true"></i></span>
                <input type="text" name="_fullname" id="fullname" tabindex="1" class="form-control panel-input" placeholder="Full Name" value="">
              </div>
              <div class="form-group input-group">
                <span class="input-group-addon panel-input-symbol"><i class="fa fa-fw fa-user" aria-hidden="true"></i></span>
                <input type="text" name="_username" id="username" tabindex="2" class="form-control panel-input" placeholder="Username" value="">
              </div>
              <div class="form-group input-group">
                <span class="input-group-addon panel-input-symbol"><i class="fa fa-fw fa-lock" aria-hidden="true"></i></span>
                <input type="password" name="_password" id="password" tabindex="3" class="form-control panel-input" placeholder="Password">
              </div>
              <div class="form-group input-group">
                <span class="input-group-addon panel-input-symbol"><i class="fa fa-fw fa-lock" aria-hidden="true"></i></span>
                <input type="confirmpassword" name="_confirmpassword" id="confirmpassword" tabindex="4" class="form-control panel-input" placeholder="Confirm Password">
              </div>
              <div class="form-group">
                <div class="row">
                  <div class="col-sm-6 col-sm-offset-3">
                    <button type="submit" value="register" name="register" id="register" tabindex="4" class="form-control btn btn-login">Register</button>
                  </div>
                </div>
              </div>
            </form>
            </div>
            <!-- Bottom Buttons -->
            <div class="panel-heading">
              <div class="row">
                <div class="col-xs-6 tabs">
                  <button class="btn btn-login square-border active" id="login-form-link" style="width: 100%;">Login</button>
                </div>
                <div class="col-xs-6 tabs">
                  <button class="btn btn-login square-border" id="register-form-link" style="width: 100%;">Register</button>
                </div>
              </div>
            </div>
          </div>
        </div>
  </div>
</div>

<script>
// Basically just repositioning the modal to be in the centre - taken off stackoverflow
$(function() {
  function reposition() {
    var modal = $(this), dialog = modal.find('.modal-dialog');
    modal.css('display', 'block');
    // Dividing by two centers the modal exactly, but dividing by three
    // or four works better for larger screens.
    dialog.css("margin-top", Math.max(0, ($(window).height() - dialog.height()) / 2));
  }
  // Reposition when a modal is shown
  $('.modal').on('show.bs.modal', reposition);
  // Reposition when the window is resized
  $(window).on('resize', function() {
    $('.modal:visible').each(reposition);
  });
});

// For launching panels and switching between register/login
$("#login-form-link").click(function(e) {
  $("#registerForm").addClass('hidden-xs-up');
  $("#loginForm").removeClass('hidden-xs-up');
  $("#login-form-link").addClass("active");
  $("#register-form-link").removeClass("active");
});
$("#register-form-link").click(function(e) {
  $("#loginForm").addClass('hidden-xs-up');
  $("#registerForm").removeClass('hidden-xs-up');
  $("#register-form-link").addClass("active");
  $("#login-form-link").removeClass("active");
});
$(function() {
  $('#login-form-link').click(function(e) {
    $("#login-form").delay(100).fadeIn(100);
    $("#register-form").fadeOut(100);
    $('#register-form-link').removeClass('active');
    $(this).addClass('active');
    e.preventDefault();
  });
  $('#register-form-link').click(function(e) {
    $("#register-form").delay(100).fadeIn(100);
    $("#login-form").fadeOut(100);
    $('#login-form-link').removeClass('active');
    $(this).addClass('active');
    e.preventDefault();
  });
});
</script>

<script>
// Resizing
$(document).ready(function() {
  $('#main-search-input').width($('#search-navbar-container').width() - $('a.navbar-brand').outerWidth() - $('#categories-dropdown').outerWidth() - $('#register-button').outerWidth() - $('#login-button').outerWidth() - 150);
  $('#search-navbar-group').width($('#search-navbar-container').width() - $('a.navbar-brand').outerWidth() - $('#categories-dropdown').outerWidth() - $('#register-button').outerWidth() - $('#login-button').outerWidth() - 150);
});
function resize() {
  $('#main-search-input').width($('#search-navbar-container').width() - $('a.navbar-brand').outerWidth() - $('#categories-dropdown').outerWidth() - $('#register-button').outerWidth() - $('#login-button').outerWidth() - 150);
  $('#search-navbar-group').width($('#search-navbar-container').width() - $('a.navbar-brand').outerWidth() - $('#categories-dropdown').outerWidth() - $('#register-button').outerWidth() - $('#login-button').outerWidth() - 150);
}
</script>

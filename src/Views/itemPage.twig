{% extends 'layout.twig' %}

{% block head %}
  {{ parent() }}
  <title>Item Page</title>
{% endblock %}

{% block content %}
  {{ parent() }}
  <div class="container py-lg-5 py-md-3 py-sm-0" ></div>

  <div class="container">
	<div class="row d-flex flex-nowrap">
	  <div class="col">
		<div class="d-flex flex-column square-border" style="min-height: 50%;">
		  <div class="d-flex">
			<ul class="nav nav-tabs nav-fill w-100">
			  <li class="nav-item active">
				<a class="nav-link rounded-0" data-toggle="tab" id="imgtab" href="#imgdisplay"><i class="fa fa-camera mr-1" aria-hidden="true"></i> Picture</a>
			  </li>
			  <li class="nav-item">
				<a class="nav-link rounded-0" data-toggle="tab" id="maptab" href="#mapdisplay"><i class="fa fa-map-marker mr-1" aria-hidden="true"></i> Map</a>
			  </li>
			</ul>
		  </div>
		  <!-- IMAGE -->
		  <div class="tab-content d-flex justify-content-center clearfix p-lg-4 p-sm-2">
			<div class="tab-pane active" id="imgdisplay">
			  <div class="d-flex">
				<img class="img-rounded mx-auto p-lg-4 p-sm-2" src="{{ asset('coal.jpg','food') }}" alt="Card image cap">
			  </div>
			</div>
			<!-- MAP -->
			<div class="tab-pane w-100" id="mapdisplay">
			  <div class="d-block flex-auto" id=map style="border: 1px solid #cccccc; height: 15rem; margin-top: -1px;"></div>
			</div>
		  </div>
		</div>

		<!-- ITEM INFORMATION -->
		<div class="d-block">

		  <h4>Block Of Coal</h4>
		  <p>Some lovely and tasty coal for all to enjoy ♥</p>
		  <br>
		  <p><strong>Expiry Date: </strong>21/03/3001</p>
		  <p><strong>Amount: </strong>100</p>
		  <p><strong>Weight: </strong>500g</p>
		  <hr>
		  <p><strong>Location: </strong>Lapland</p>
		  <p><strong>Postage: </strong>No cost, I'll get one of my elves to hand deliver it ♥</p>
		</div>
	  </div>

	  <div class="col-md-5">
		<div class="card" style="border: 1px solid #cccccc">
		  <div class="card-block">
			<h4 class="card-title">Donator Information</h4>
			<p class="card-text"><strong>Name: </strong>Father Christmas</p>
			<p class="card-text">
			  <strong>Rating: </strong><span style="color: gold; font-size:1.5em;">&#8902;&#8902;&#8902;&#8902;&#8902;</span></p>
			<hr>
			<a class="card-text" href="#">See other items (X available)</a>
			<hr>
			<div class="d-flex justify-content-around ">
			  <button class="btn btn-primary">Request</button>
			  <button class="btn btn-secondary">Message</button>
			</div>
		  </div>
		</div>
	  </div>
	</div>
  </div>
{% endblock %}

{% block scripts %}
  {{ parent() }}

  <script>
	  $(document).ready(function () {
		  $('#user-popover').popover({
			  trigger: 'focus',
		  });

		  $('#maptab').on('shown.bs.tab', function () {
			  google.maps.event.trigger(map, 'resize');
		  })


	  });
  </script>

  {#todo: store map marker(s) in array, redraw each time#}

  <script>
	  map = null;

	  function initMapElements() {
		  // 67.9222° N, 26.5046° E
		  var lapland = {lat: 67.9222, lng: 26.5046};
		  map = new google.maps.Map(document.getElementById('map'), {
			  zoom            : 10,
			  center          : lapland,
			  disableDefaultUI: true,
		  });

		  var marker = new google.maps.Marker({
			  position: lapland,
			  map     : map,
		  });

	  }
  </script>

  <script async defer
		  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDxJox1KlfQI8Tzo1I4wAMgSUELoga4DX0&libraries=places&callback=initMapElements">
  </script>
{% endblock %}
